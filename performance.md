# 19.8.6

자바스크립트 성능 최적화 전략 

1. 히든클래스

자바스크립트 인터프리터 (실행하면서 해석한다.)는 해쉬함수구조로 객체 속성값 위치를 메모리에 저장함. 다른언어는 같은 데이터는 같은 주소에 저장된다. 하지만.. 자바스크립트는... 그렇지 않다.

- 이름 = 홍길동
- 나이 = 100
- 생일 = 1988

위의 값에서 홍길동과 100 1988이라는 값의 위치를 이름 나이 생일에 저장하는 것이라고 보면 된다. 그러면 속성을 가져오는게 되는 비용이 해쉬를 사용하는 만큼 더 많아지게 된다. 핵심은 그래서 해쉬, 저장하는 위치를 최적화 하는 것이다. 이런 방법으로 해결하는 것이 히든 클래스다. 최대한 같은 데이터는 같은 주소를 갖게 작업하자.


2. 인라인 캐싱

최근 호출된 함수에 파라미터로 전달된 타입을 캐싱한다. 이렇게 하면 불필요한 추론을 통한 비용이 들지 않는다.

2번의 성공적인 호출이 알어난다면, 조회한 속성에 대한 오프셋 포린터를 더해놓음으로(표시한다) 불필요한 추론에 비용을 쏟지 않는 것이다.

엔진에서 타입 전환시 인터프리터 단게에서 불필요한 추론이 필요해진다. 그러므로 원시형 타입만큼은 타입변환을 하지않고 지속적으로 쓰는것이 좋다.

배열또한 마찬가지다. 리스트 유형이 변하여 불필요하게 (크랭크샤프트) 리소스를 사용하지 말자.


3. 그럼 어떻게 ?

- 객체의 속성을 같은 순서로 초기화 같은 속성을 같는 객체는 같은 주소를 바라보게 하는 것이다.

- 함수를 실행해야 한다면 같은 메소드가 반복적으로 실행될수 있게 한다.






